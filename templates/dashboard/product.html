{% extends 'partials/base.html' %}

{% block title %}
  Product
{% endblock %}

{% block content %}
  <div class="container my-4">
    <div class="row">
      <div class="col-md-4">
        <div class="card shadow-sm">
          {% for message in messages %}
            {% if message %}
              <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endif %}
          {% endfor %}
          <div class="card-header bg-info text-white">
            <h4>Add Products</h4>
          </div>
          <div class="card-body">
            <form action="" method="POST" enctype="multipart/form-data">
              {% csrf_token %}
              {{ form.as_p }}
              <button class="btn btn-success btn-block" type="submit">Add Product</button>
            </form>
          </div>
        </div>
      </div>

      <div class="col-md-8">
        <div class="card shadow-sm">
          <div class="card-header bg-info text-white">
            <h4>Product List</h4>
          </div>
          <div class="card-body">
            <table class="table table-striped table-bordered">
              <thead class="bg-info text-white">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Name</th>
                  <th scope="col">Category</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Price</th>
                  <th scope="col">Image</th>
                  <th scope="col">Description</th>
                  <th scope="col">Activity</th>
                </tr>
              </thead>
              <tbody>
                {% for item in items %}
                  <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ item.name }}</td>
                    <td>{{ item.category }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>rupees {{ item.price }}</td>
                    <td>
                      {% if item.image %}
                        <img src="{{ item.image.url }}" alt="{{ item.name }}" style="max-width: 100px; max-height: 100px;" />
                      {% else %}
                        <img src="/static/default-image.png" alt="No image available" style="max-width: 100px; max-height: 100px;" />
                      {% endif %}
                    </td>
                    <td>{{ item.description }}</td>
                    <td>
                      <a class="btn btn-info btn-sm" href="{% url 'product_update' item.id %}">Edit</a>
                      <a class="btn btn-danger btn-sm" href="{% url 'delete' item.id %}">Delete</a>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
